
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>Simple Box2D - Custom Polygon creation.</title>
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" type="text/css" href="../assets/built/screen.css?v=3da076d976.css">

    <link rel="shortcut icon" href="../favicon.ico" type="image/x-icon">
    <link rel="canonical" href="index.html">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <link rel="amphtml" href="amp/index.html">
    
    <meta property="og:site_name" content="Psyked">
    <meta property="og:type" content="article">
    <meta property="og:title" content="Simple Box2D - Custom Polygon creation.">
    <meta property="og:description" content="I've been working on some classes to simplify Box2D for Actionscript developers (See previous post for a quick intro).  The latest update to these classes introduces couple of minor ideas, and one gosh-darned awesome idea, if I do say so myself.  Let's start with the awesome things, and move on">
    <meta property="og:url" content="https://www.psyked.co.uk/simple-box2d-custom-polygon-creation/">
    <meta property="article:published_time" content="2010-01-11T08:09:33.000Z">
    <meta property="article:modified_time" content="2017-09-25T21:24:30.000Z">
    <meta property="article:tag" content="ActionScript">
    <meta property="article:tag" content="Box2D">
    <meta property="article:tag" content="ActionScript 3">
    
    <meta property="article:publisher" content="https://www.facebook.com/psykedcouk">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Simple Box2D - Custom Polygon creation.">
    <meta name="twitter:description" content="I've been working on some classes to simplify Box2D for Actionscript developers (See previous post for a quick intro).  The latest update to these classes introduces couple of minor ideas, and one gosh-darned awesome idea, if I do say so myself.  Let's start with the awesome things, and move on">
    <meta name="twitter:url" content="https://www.psyked.co.uk/simple-box2d-custom-polygon-creation/">
    <meta name="twitter:label1" content="Written by">
    <meta name="twitter:data1" content="James Ford">
    <meta name="twitter:label2" content="Filed under">
    <meta name="twitter:data2" content="ActionScript, Box2D, ActionScript 3">
    <meta name="twitter:site" content="@psyked">
    <meta name="twitter:creator" content="@psyked">
    
    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "publisher": {
        "@type": "Organization",
        "name": "Psyked",
        "logo": {
            "@type": "ImageObject",
            "url": "https://www.psyked.co.uk/favicon.ico",
            "width": 60,
            "height": 60
        }
    },
    "author": {
        "@type": "Person",
        "name": "James Ford",
        "image": {
            "@type": "ImageObject",
            "url": "https://www.psyked.co.uk/content/images/2017/09/profile-photo-2.jpg",
            "width": 1367,
            "height": 1365
        },
        "url": "https://www.psyked.co.uk/author/james/",
        "sameAs": [
            "https://twitter.com/psyked"
        ]
    },
    "headline": "Simple Box2D - Custom Polygon creation.",
    "url": "https://www.psyked.co.uk/simple-box2d-custom-polygon-creation/",
    "datePublished": "2010-01-11T08:09:33.000Z",
    "dateModified": "2017-09-25T21:24:30.000Z",
    "keywords": "ActionScript, Box2D, ActionScript 3",
    "description": "I&#x27;ve been working on some classes to simplify Box2D for Actionscript developers (See previous post for a quick intro).  The latest update to these classes introduces couple of minor ideas, and one gosh-darned awesome idea, if I do say so myself.  Let&#x27;s start with the awesome things, and move on",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://www.psyked.co.uk/"
    }
}
    </script>

    <script type="text/javascript" src="../public/ghost-sdk.js?v=3da076d976"></script>
<script type="text/javascript">
ghost.init({
	clientId: "ghost-frontend",
	clientSecret: "a00f0a6e663b"
});
</script>
    <meta name="generator" content="Ghost 1.10">
    <link rel="alternate" type="application/rss+xml" title="Psyked" href="../rss/index.html">
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-1821078-1', 'auto');
  ga('send', 'pageview');

</script>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-9822532238875422",
    enable_page_level_ads: true
  });
</script>

</head>
<body class="post-template tag-actionscript tag-box2d tag-actionscript-3">

    <div class="site-wrapper">

        

<header class="site-header outer">
    <div class="inner">
        <nav class="site-nav">
    <div class="site-nav-left">
                <a class="site-nav-logo" href="../">Psyked</a>
            <ul class="nav">
    <li class="nav-home" role="presentation"><a href="https://www.psyked.co.uk/">Home</a></li>
    <li class="nav-about" role="presentation"><a href="../about/">About</a></li>
    <li class="nav-thought-leadership" role="presentation"><a href="../thought-leadership/">Thought Leadership</a></li>
    <li class="nav-pokproject" role="presentation"><a href="https://www.pokeproject.co.uk/">Poképroject</a></li>
</ul>
    </div>
    <div class="site-nav-right">
        <div class="social-links">
                <a class="social-link social-link-fb" href="https://www.facebook.com/psykedcouk" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 32 32"><path d="M19 6h5V0h-5c-3.86 0-7 3.14-7 7v3H8v6h4v16h6V16h5l1-6h-6V7c0-.542.458-1 1-1z"></path></svg>
</a>
                <a class="social-link social-link-tw" href="https://twitter.com/psyked" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 32 32"><path d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088 0 0 1-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015 0 0 1-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25 0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688 0 5.063-.875 7.188-2.5-1.25 0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5 0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673 0 0 1-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228 0 0 1-1.875-2c-.5-.875-.688-1.813-.688-2.75 0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579 0 0 1 1.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48 0 0 0 3.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"></path></svg>
</a>
        </div>
            <a class="rss-button" href="http://cloud.feedly.com/#subscription/feed/https://www.psyked.co.uk/rss/" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><circle cx="6.18" cy="17.82" r="2.18"></circle><path d="M4 4.44v2.83c7.03 0 12.73 5.7 12.73 12.73h2.83c0-8.59-6.97-15.56-15.56-15.56zm0 5.66v2.83c3.9 0 7.07 3.17 7.07 7.07h2.83c0-5.47-4.43-9.9-9.9-9.9z"></path></svg>
</a>
    </div>
</nav>
    </div>
</header>


<main id="site-main" class="site-main outer" role="main">
    <div class="inner">

        <article class="post-full post tag-actionscript tag-box2d tag-actionscript-3 no-image">

            <header class="post-full-header">
                <section class="post-full-meta">
                    <time class="post-full-meta-date" datetime="2010-01-11">11 January 2010</time>
                        <span class="date-divider">/</span> <a href="../tag/actionscript/">ActionScript</a>
                </section>
                <h1 class="post-full-title">Simple Box2D - Custom Polygon creation.</h1>
            </header>


            <section class="post-full-content">
                <div class="kg-card-markdown"><p>I've been working on some classes to simplify Box2D for Actionscript developers (See <a href="http://www.psyked.co.uk/actionscript/simplifying-box2das3.htm" target="_self">previous post</a> for a quick intro).  The latest update to these classes introduces couple of minor ideas, and one gosh-darned awesome idea, if I do say so myself.  Let's start with the awesome things, and move on from there...</p>
<h3>Awesome thing: Creating Custom Polygons</h3>
Or rather the methods for creating them.  Shapes in Box2D come in three basic flavours - circle, rectangle and custom polygon.  Moreover, everything must be convex (no inny bits), have no more than 8 sides, and can't have holes.  On the plus side you can still make larger, more complex objects out of smaller ones - but it all involves a lot of thinking.
<p>So, here's the solution - or rather, the options.</p>
<p><strong>Polygon creation option #1 - Creating a polygon from an array of points.</strong></p>
<p>Using some clever triangulation code from <a href="http://www.splashdust.net/2009/10/box2d-mouse-drawing-now-with-ear-clipping/" target="_blank">Splashdust.net</a>, there's a simple method for creating any custom shape from an array of Point objects.  With this method you can create a shape with any number of sides, and not worry about whether the shape is concave or convex.  It'll still break if the edges of your shape interest each other, and doesn't support holes in the objects you're creating, but it's a start.</p>
<object width="500" height="280">
<param name="movie" value="/content/images/2010/01/ComplexPolygonExample.swf">
<embed src="../content/images/2010/01/ComplexPolygonExample.swf" width="500" height="280">
</embed>
</object>
<pre><code>var array:Array = [ new Point( 0, 0 ), new Point( 10, 0 ), new Point( 10, 10 ), new Point( 20, 10 ), new Point( 20, 0 ), new Point( 30, 0 ), new Point( 30, 30 ), new Point( 0, 30 ) ];

world.createComplexPolygon( 50, 50, array );</code></pre>
<p><strong>Polygon creation option #2 - Creating a polygon from a shape in a library.</strong></p>
<p><strong><a href="../content/images/2010/01/flashshapedemo.jpg"><img class="alignnone size-full wp-image-1107" title="flashshapedemo" src="../content/images/2010/01/flashshapedemo.jpg" alt="" width="500" height="280"></a></strong></p>
<p>This is where things get cool.  Creating a shape from a series of points is all well and good, but it's a laborious process to set up and modify.  You can create a shape in the Flash IDE, add your symbol to your library and import it to Box2D.  Currently this method only supports single shapes on a single layer, and only straight edges - but multiple shapes, layers and curved edges are definitely on the list for the future.</p>
<object width="500" height="280">
<param name="movie" value="/content/images/2010/01/LibraryShapeExample.swf">
<embed src="../content/images/2010/01/LibraryShapeExample.swf" width="500" height="280">
</embed>
</object>
<pre><code>world.createPolyFromLibraryShape( 300, 100, "sampleShape", "vectorassets.swf" );</code></pre><!--more-->
<h3>Minor thing #1: Mouse interaction</h3>
What fun is a simulation if you can't interact with it? So we now have an easy way to add mouse joints to move things about.  In the next version it's my plan to add a method for filtering out objects, presumably based on each bodies userData.
<pre>world.mouseInteraction = true;</pre>
<h3>Minor thing #2: Framerate-independent animation.</h3>
I stole this idea wholeheartedly from <a href="http://actionsnippet.com/?p=1471" target="_blank">QuickBox2D</a>.  Too good an idea to pass up I'm afraid, this just means that the simulation of the Box2D world is based on a timer, not a framerate.  In theory then, the simulation doesn't slow down or speed up depending on the framerate - which is useful for many things, like graphic-intensive applications and/or memory optimisation.
<pre>world.framerateIndependantAnimation = true;</pre>
And here's some code for a quick example with framerate independent animation and mouse interaction enabled;
<pre><code>var options:Box2DWorldOptions = new Box2DWorldOptions( 500, 280, 30, 9.8 );
options.setWorldEdges( true, true, true, true );
var world:Box2DWorld = Box2DUtils.createBoxedWorld( options );
world.debugDraw = true;
world.mouseInteractExclusions = new Array();
world.mouseInteraction = true;
world.framerateIndependantAnimation = true;
addChild( world );</code></pre>
<p>I've compiled all of my source files into a handy project file if you want to take a look.  Documentation and comments are a bit sparse, but hopefully it'll prove useful!</p>
<h2><a href="../content/images/2010/01/box2dutils.zip" target="_blank">Download the project files [Zip, 48kb]</a></h2>
<a href="../content/images/2010/01/simples.jpg"><img class="alignnone size-full wp-image-1098" title="simples" src="../content/images/2010/01/simples.jpg" alt="" width="500" height="280"></a>
<p>Simples!</p>
</div>
            </section>


            <footer class="post-full-footer">

                <section class="author-card">
                        <img class="author-profile-image" src="../content/images/2017/09/profile-photo-2.jpg" alt="James Ford">
                    <section class="author-card-content">
                        <h4 class="author-card-name"><a href="../">James Ford</a></h4>
                            <p>Front End web developer, author of the Flash Facebook Cookbook and Senior Developer at Deeson.</p>
                    </section>
                </section>
                <div class="post-full-footer-right">
                    <a class="author-card-button" href="../">Read More</a>
                </div>

            </footer>


        </article>

    </div>
</main>

<aside class="read-next outer">
    <div class="inner">
        <div class="read-next-feed">

                <article class="read-next-card" style="background-image: url(../content/images/2017/09/orion-nebula-11185_960_720.jpg)">
                    <header class="read-next-card-header">
                        <small class="read-next-card-header-sitetitle">— Psyked —</small>
                        <h3 class="read-next-card-header-title"><a href="../tag/actionscript/">ActionScript</a></h3>
                    </header>
                    <div class="read-next-divider"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M13 14.5s2 3 5 3 5.5-2.463 5.5-5.5S21 6.5 18 6.5c-5 0-7 11-12 11C2.962 17.5.5 15.037.5 12S3 6.5 6 6.5s4.5 3.5 4.5 3.5"></path></svg>
</div>
                    <div class="read-next-card-content">
                        <ul>
                            <li><a href="../the-slides-from-my-presentation-at-flashmidlands/">The slides from my presentation at FlashMidlands.</a></li>
                            <li><a href="../introducing-the-flash-facebook-cookbook/">Introducing: The Flash Facebook Cookbook</a></li>
                            <li><a href="../i-hate-using-avm1movie/">I hate using AVM1Movie...</a></li>
                        </ul>
                    </div>
                    <footer class="read-next-card-footer">
                        <a href="../tag/actionscript/">See all 49 posts →</a>
                    </footer>
                </article>

                <article class="post-card post tag-flex tag-autocomplete tag-component no-image">
    <div class="post-card-content">
        <a class="post-card-content-link" href="../link-flex-autocomplete-component/">
            <header class="post-card-header">
                    <span class="post-card-tags">Flex</span>
                <h2 class="post-card-title">Link: Flex AutoComplete component</h2>
            </header>
            <section class="post-card-excerpt">
                <p>If you're ever looking for an autocompletion component in the Flex framework, I'd strongly suggest you check this one out: http://hillelcoren.com/flex-autocomplete/ Quite simply it's awesome, it's fully featured and packs</p>
            </section>
        </a>
        <footer class="post-card-meta">
                <img class="author-profile-image" src="../content/images/2017/09/profile-photo-2.jpg" alt="James Ford">
            <span class="post-card-author"><a href="../author/james/">James Ford</a></span>
        </footer>
    </div>
</article>

                <article class="post-card post tag-actionscript tag-box2d tag-actionscript-3 no-image">
    <div class="post-card-content">
        <a class="post-card-content-link" href="../simplifying-box2das3/">
            <header class="post-card-header">
                    <span class="post-card-tags">ActionScript</span>
                <h2 class="post-card-title">Simplifying Box2DAS3...</h2>
            </header>
            <section class="post-card-excerpt">
                <p>One of the downsides to the Box2DAS3 project - and probably one of the major hurdles to most Flash developers - is the fact that it's inherited a lot of the syntax from</p>
            </section>
        </a>
        <footer class="post-card-meta">
                <img class="author-profile-image" src="../content/images/2017/09/profile-photo-2.jpg" alt="James Ford">
            <span class="post-card-author"><a href="../author/james/">James Ford</a></span>
        </footer>
    </div>
</article>

        </div>
    </div>
</aside>

<div class="floating-header">
    <div class="floating-header-logo">
        <a href="../">
            <span>Psyked</span>
        </a>
    </div>
    <span class="floating-header-divider">—</span>
    <div class="floating-header-title">Simple Box2D - Custom Polygon creation.</div>
    <div class="floating-header-share">
        <div class="floating-header-share-label">Share this <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24">
    <path d="M7.5 15.5V4a1.5 1.5 0 1 1 3 0v4.5h2a1 1 0 0 1 1 1h2a1 1 0 0 1 1 1H18a1.5 1.5 0 0 1 1.5 1.5v3.099c0 .929-.13 1.854-.385 2.748L17.5 23.5h-9c-1.5-2-5.417-8.673-5.417-8.673a1.2 1.2 0 0 1 1.76-1.605L7.5 15.5zm6-6v2m-3-3.5v3.5m6-1v2"></path>
</svg>
</div>
        <a class="floating-header-share-tw" href="https://twitter.com/share?text=Simple%20Box2D%20-%20Custom%20Polygon%20creation.&amp;url=https://www.psyked.co.uk/simple-box2d-custom-polygon-creation/" onclick="window.open(this.href, 'share-twitter', 'width=550,height=235');return false;">
            <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 32 32"><path d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088 0 0 1-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015 0 0 1-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25 0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688 0 5.063-.875 7.188-2.5-1.25 0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5 0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673 0 0 1-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228 0 0 1-1.875-2c-.5-.875-.688-1.813-.688-2.75 0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579 0 0 1 1.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48 0 0 0 3.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"></path></svg>
        </a>
        <a class="floating-header-share-fb" href="https://www.facebook.com/sharer/sharer.php?u=https://www.psyked.co.uk/simple-box2d-custom-polygon-creation/" onclick="window.open(this.href, 'share-facebook','width=580,height=296');return false;">
            <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 32 32"><path d="M19 6h5V0h-5c-3.86 0-7 3.14-7 7v3H8v6h4v16h6V16h5l1-6h-6V7c0-.542.458-1 1-1z"></path></svg>
        </a>
    </div>
    <progress class="progress" value="0">
        <div class="progress-container">
            <span class="progress-bar"></span>
        </div>
    </progress>
</div>




        <footer class="site-footer outer">
            <div class="site-footer-content inner">
                <section class="copyright"><a href="../">Psyked</a> © 2017</section>
                <nav class="site-footer-nav">
                    <a href="../">Latest Posts</a>
                    <a href="https://www.facebook.com/psykedcouk" target="_blank">Facebook</a>
                    <a href="https://twitter.com/psyked" target="_blank">Twitter</a>
                    <a href="https://ghost.org" target="_blank">Ghost</a>
                </nav>
            </div>
        </footer>

    </div>


    <script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous">
    </script>
    <script type="text/javascript" src="../assets/js/jquery.fitvids.js?v=3da076d976"></script>


    <script>

// NOTE: Scroll performance is poor in Safari
// - this appears to be due to the events firing much more slowly in Safari.
//   Dropping the scroll event and using only a raf loop results in smoother
//   scrolling but continuous processing even when not scrolling
$(document).ready(function () {
    // Start fitVids
    var $postContent = $(".post-full-content");
    $postContent.fitVids();
    // End fitVids

    var progressBar = document.querySelector('progress');
    var header = document.querySelector('.floating-header');
    var title = document.querySelector('.post-full-title');

    var lastScrollY = window.scrollY;
    var lastWindowHeight = window.innerHeight;
    var lastDocumentHeight = $(document).height();
    var ticking = false;

    function onScroll() {
        lastScrollY = window.scrollY;
        requestTick();
    }

    function onResize() {
        lastWindowHeight = window.innerHeight;
        lastDocumentHeight = $(document).height();
        requestTick();
    }

    function requestTick() {
        if (!ticking) {
            requestAnimationFrame(update);
        }
        ticking = true;
    }

    function update() {
        var trigger = title.getBoundingClientRect().top + window.scrollY;
        var triggerOffset = title.offsetHeight + 35;
        var progressMax = lastDocumentHeight - lastWindowHeight;

        // show/hide floating header
        if (lastScrollY >= trigger + triggerOffset) {
            header.classList.add('floating-active');
        } else {
            header.classList.remove('floating-active');
        }

        progressBar.setAttribute('max', progressMax);
        progressBar.setAttribute('value', lastScrollY);

        ticking = false;
    }

    window.addEventListener('scroll', onScroll, {passive: true});
    window.addEventListener('resize', onResize, false);

    update();
});
</script>


    <!-- You can safely delete this line if your theme does not require jQuery -->
<!-- <script type="text/javascript" src="https://code.jquery.com/jquery-1.11.3.min.js"></script> -->

<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Blog Ads -->
<ins class="adsbygoogle" style="display:block;background:#333" data-ad-client="ca-pub-9822532238875422" data-ad-slot="2939606192" data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<style>.adsbygoogle iframe{margin:0}</style>

</body>
