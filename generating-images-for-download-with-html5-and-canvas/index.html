
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>Generating images for download with HTML5 and Canvas</title>
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" type="text/css" href="../assets/built/screen.css?v=13d67b6af7.css">

    <link rel="shortcut icon" href="../favicon.ico" type="image/x-icon">
    <link rel="canonical" href="index.html">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <link rel="amphtml" href="amp/index.html">
    
    <meta property="og:site_name" content="Psyked">
    <meta property="og:type" content="article">
    <meta property="og:title" content="Generating images for download with HTML5 and Canvas">
    <meta property="og:description" content="Summary With a clever bit of trickery from HTML5 and JavaScript, it is possible to trigger a browser download of anything that can be generated in a canvas element, regardless of whether that element is visible or not. This works in modern browsers which support the 'download' attribute and which">
    <meta property="og:url" content="http://localhost:2368/generating-images-for-download-with-html5-and-canvas/">
    <meta property="og:image" content="http://localhost:2368/content/images/2017/04/neven-krcmarek-145603.jpg">
    <meta property="article:published_time" content="2017-05-01T08:57:00.000Z">
    <meta property="article:modified_time" content="2017-05-01T08:57:00.000Z">
    <meta property="article:tag" content="canvas">
    <meta property="article:tag" content="HTML5">
    <meta property="article:tag" content="JavaScript">
    
    <meta property="article:publisher" content="https://www.facebook.com/psykedcouk">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Generating images for download with HTML5 and Canvas">
    <meta name="twitter:description" content="Summary With a clever bit of trickery from HTML5 and JavaScript, it is possible to trigger a browser download of anything that can be generated in a canvas element, regardless of whether that element is visible or not. This works in modern browsers which support the 'download' attribute and which">
    <meta name="twitter:url" content="http://localhost:2368/generating-images-for-download-with-html5-and-canvas/">
    <meta name="twitter:image" content="http://localhost:2368/content/images/2017/04/neven-krcmarek-145603.jpg">
    <meta name="twitter:label1" content="Written by">
    <meta name="twitter:data1" content="James Ford">
    <meta name="twitter:label2" content="Filed under">
    <meta name="twitter:data2" content="canvas, HTML5, JavaScript">
    <meta name="twitter:site" content="@psyked">
    <meta property="og:image:width" content="1440">
    <meta property="og:image:height" content="960">
    
    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "publisher": {
        "@type": "Organization",
        "name": "Psyked",
        "logo": {
            "@type": "ImageObject",
            "url": "http://localhost:2368/favicon.ico",
            "width": 60,
            "height": 60
        }
    },
    "author": {
        "@type": "Person",
        "name": "James Ford",
        "image": {
            "@type": "ImageObject",
            "url": "//www.gravatar.com/avatar/50bd52fe63e2264aeae49b33d0e9102e?s=250&d=mm&r=x",
            "width": 250,
            "height": 250
        },
        "url": "http://localhost:2368/author/james/",
        "sameAs": []
    },
    "headline": "Generating images for download with HTML5 and Canvas",
    "url": "http://localhost:2368/generating-images-for-download-with-html5-and-canvas/",
    "datePublished": "2017-05-01T08:57:00.000Z",
    "dateModified": "2017-05-01T08:57:00.000Z",
    "image": {
        "@type": "ImageObject",
        "url": "http://localhost:2368/content/images/2017/04/neven-krcmarek-145603.jpg",
        "width": 1440,
        "height": 960
    },
    "keywords": "canvas, HTML5, JavaScript",
    "description": "Summary With a clever bit of trickery from HTML5 and JavaScript, it is possible to trigger a browser download of anything that can be generated in a canvas element, regardless of whether that element is visible or not. This works in modern browsers which support the &#x27;download&#x27; attribute and which",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "http://localhost:2368/"
    }
}
    </script>

    <script type="text/javascript" src="../public/ghost-sdk.js?v=13d67b6af7"></script>
<script type="text/javascript">
ghost.init({
	clientId: "ghost-frontend",
	clientSecret: "a00f0a6e663b"
});
</script>
    <meta name="generator" content="Ghost 1.8">
    <link rel="alternate" type="application/rss+xml" title="Psyked" href="../rss/index.html">
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-1821078-1', 'auto');
  ga('send', 'pageview');

</script>
<script async src="http://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-9822532238875422",
    enable_page_level_ads: true
  });
</script>

</head>
<body class="post-template tag-canvas tag-html5 tag-javascript">

    <div class="site-wrapper">

        

<header class="site-header outer">
    <div class="inner">
        <nav class="site-nav">
    <div class="site-nav-left">
                <a class="site-nav-logo" href="../">Psyked</a>
            <ul class="nav">
    <li class="nav-home" role="presentation"><a href="https://www.psyked.co.uk/">Home</a></li>
    <li class="nav-medium" role="presentation"><a href="https://medium.com/@psyked">Medium</a></li>
    <li class="nav-github" role="presentation"><a href="https://github.com/psyked">GitHub</a></li>
    <li class="nav-twitter" role="presentation"><a href="https://twitter.com/psyked">Twitter</a></li>
    <li class="nav-facebook" role="presentation"><a href="https://www.facebook.com/psykedcouk/">Facebook</a></li>
    <li class="nav-linkedin" role="presentation"><a href="https://www.linkedin.com/in/jamesford/">LinkedIn</a></li>
    <li class="nav-speaker-deck" role="presentation"><a href="https://speakerdeck.com/psyked">Speaker Deck</a></li>
    <li class="nav-medium-old" role="presentation"><a href="https://medium.com/@psyked_james">Medium (old)</a></li>
    <li class="nav-twitter-old" role="presentation"><a href="https://twitter.com/psyked_james">Twitter (old)</a></li>
    <li class="nav-pokproject" role="presentation"><a href="https://www.pokeproject.co.uk/">Poképroject</a></li>
</ul>
    </div>
    <div class="site-nav-right">
        <div class="social-links">
                <a class="social-link social-link-fb" href="https://www.facebook.com/psykedcouk" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 32 32"><path d="M19 6h5V0h-5c-3.86 0-7 3.14-7 7v3H8v6h4v16h6V16h5l1-6h-6V7c0-.542.458-1 1-1z"></path></svg>
</a>
                <a class="social-link social-link-tw" href="https://twitter.com/psyked" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 32 32"><path d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088 0 0 1-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015 0 0 1-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25 0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688 0 5.063-.875 7.188-2.5-1.25 0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5 0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673 0 0 1-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228 0 0 1-1.875-2c-.5-.875-.688-1.813-.688-2.75 0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579 0 0 1 1.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48 0 0 0 3.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"></path></svg>
</a>
        </div>
            <a class="rss-button" href="http://cloud.feedly.com/#subscription/feed/http://localhost:2368/rss/" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><circle cx="6.18" cy="17.82" r="2.18"></circle><path d="M4 4.44v2.83c7.03 0 12.73 5.7 12.73 12.73h2.83c0-8.59-6.97-15.56-15.56-15.56zm0 5.66v2.83c3.9 0 7.07 3.17 7.07 7.07h2.83c0-5.47-4.43-9.9-9.9-9.9z"></path></svg>
</a>
    </div>
</nav>
    </div>
</header>


<main id="site-main" class="site-main outer" role="main">
    <div class="inner">

        <article class="post-full post tag-canvas tag-html5 tag-javascript ">

            <header class="post-full-header">
                <section class="post-full-meta">
                    <time class="post-full-meta-date" datetime="2017-05-01">1 May 2017</time>
                        <span class="date-divider">/</span> <a href="../tag/canvas/">canvas</a>
                </section>
                <h1 class="post-full-title">Generating images for download with HTML5 and Canvas</h1>
            </header>

            <figure class="post-full-image" style="background-image: url(../content/images/2017/04/neven-krcmarek-145603.jpg)">
            </figure>

            <section class="post-full-content">
                <div class="kg-card-markdown"><h2 id="summary">Summary</h2>
<p>With a clever bit of trickery from HTML5 and JavaScript, it is possible to trigger a browser download of anything that can be generated in a canvas element, regardless of whether that element is visible or not. This works in modern <a href="https://caniuse.com/#feat=download">browsers which support the 'download' attribute</a> and <a href="https://caniuse.com/#feat=canvas">which support the 'canvas' element.</a></p>
<h2 id="introduction">Introduction</h2>
<p>In most browsers a canvas image can already be natively saved through the right-click menu, and what this technique is doing is essentially automating, or forcing, this action on the users' behalf. One of the advantages with this technique - besides the improved user experience - is that you have a chance to cleanly re-render the canvas element and essentially modify the output before the browser begins saving the image.</p>
<p>This means you can adjust the resolution, the aspect ratio, add watermarks or even modify the image data before it's downloaded by the user. Of course, the original right-click menu and functionality still exists, so you can't use this as a method of stopping users from saving your images completely, but it does mean that you can give them a better experience using your website.</p>
<h2 id="realworldexample">Real-world example</h2>
<p>I've used this technique on <a href="https://www.pokeproject.co.uk/">PokéProject</a>, with what I call the <a href="https://www.pokeproject.co.uk/instagram/">'Highresinator'.</a> PokéProject takes the pixel art from the original Pokémon GameBoy games, and scales it up from the original 32x32 pixel images into wallpaper backgrounds for desktop computers or mobile devices.</p>
<p><a href="https://www.pokeproject.co.uk/instagram/gengar"><img src="../content/images/2017/04/pokeproject.png" alt="Real world example on PokéProject"></a></p>
<p>As you can see in the image above, as part of this process I'm generating a canvas-based preview of the wallpaper image, but that preview canvas isn't the correct resolution for any downloads. To fix this I've added a short form with download buttons, and clicking any of those buttons will generate the artwork shown on the canvas at the specified resolution.</p>
<p><img src="../content/images/2017/04/downloadpokeproject.gif" alt="Animated example of PokéProject"></p>
<h2 id="examplecode">Example code</h2>
<p>The key steps to this process are simple. First you have to generate an off-screen canvas element, into which you draw your image, and then you create an anchor element with a download attribute, transfer the users' click event to this element, and a download will be triggered.</p>
<p>Let's look at some sample code.</p>
<p>First, we're going to need a simple website which contains a canvas element:</p>
<pre><code>&lt;html&gt;
	&lt;head&gt;
		&lt;title&gt;Canvas Downloads&lt;/title&gt;
	&lt;/head&gt;
	&lt;body&gt;
		&lt;canvas id="myCanvas" width="100" height="100"&gt;&lt;/canvas&gt;
		&lt;a id="downloadLink" href="#"&gt;Download Canvas&lt;/a&gt;
	&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>Next we use JavaScript to render something simple on the canvas - a bright red box, for example:</p>
<pre><code>&lt;script&gt;
	var canvasElement = document.getElementById('myCanvas')
	var drawingContext = canvasElement.getContext('2d')
	drawingContext.fillStyle = '#ff0000'
	drawingContext.fillRect(10, 10, 80, 80)
&lt;/script&gt;
</code></pre>
<p><img src="../content/images/2017/04/preview.png" alt="Demo preview"></p>
<p>That works, but it's not very reusable - so let's refactor it a little:</p>
<pre><code>&lt;script&gt;
	function renderCanvas(canvasElement) {
		var drawingContext = canvasElement.getContext('2d')
		drawingContext.fillStyle = '#ff0000'
		drawingContext.fillRect(10, 10, 80, 80)
	}
	var canvasElement = document.getElementById('myCanvas')
	renderCanvas(canvasElement)
&lt;/script&gt;
</code></pre>
<p>That's a bit more reusable - we're still doing the same actions, but we've made the canvas element that we draw to reusable.</p>
<p><img src="../content/images/2017/04/rightclickpreview.png" alt="Demo right click preview"></p>
<p>Our users can currently right click on the canvas element and save it locally. Let's add a button which will perform this action for them automatically.</p>
<pre><code>&lt;script&gt;
	function renderCanvas(canvasElement) {
		var drawingContext = canvasElement.getContext('2d')
		drawingContext.fillStyle = '#ff0000'
		drawingContext.fillRect(10, 10, 80, 80)
	}
	var canvasElement = document.getElementById('myCanvas')
	renderCanvas(canvasElement)

	var linkElement = document.getElementById('downloadLink')
	linkElement.addEventListener('click', function() {
		var newCanvas = document.createElement('canvas')
		newCanvas.width = 100
		newCanvas.height = 100

		renderCanvas(newCanvas)

		let fakeDownloadElement = document.createElement('a')
	    document.body.appendChild(fakeDownloadElement)
	    fakeDownloadElement.setAttribute('href', newCanvas.toDataURL('image/png', 1.0))
	    fakeDownloadElement.setAttribute('download', 'red-square.png')
	    fakeDownloadElement.style.display = ''

	    fakeDownloadElement.click()

	    document.body.removeChild(element)
	})
&lt;/script&gt;
</code></pre>
<p>That's a lot of new code, but there's a few simple steps to this process:</p>
<ol>
<li>We create a new canvas DOM element, which is not added to the main page DOM and therefore is not visible.</li>
<li>We re-use our original canvas drawing logic, to draw a red box into our new (invisible) canvas element</li>
<li>We create a hyperlink element in the page DOM, set the element URL to be an bytedata representation of the canvas element (in png format as well, for transparency)</li>
<li>We set the 'download' attribute on the new element, specifying the download filename <em>and</em> changing the default browser behaviour and have it download the data as a file rather than trying to navigate to an URL</li>
<li>We fake a click event on our new hyperlink element, to trigger the file save</li>
<li>We remove the link element from the DOM and clean up afterwards</li>
</ol>
<p><img src="../content/images/2017/04/canvaspreview-2.gif" alt="Canvas download image preview"></p>
<p>This code is currently just saving exactly what's in the canvas. Let's make things a little more interesting - we're going to change the size of the download and the colour of the box.</p>
<pre><code>&lt;script&gt;
	function renderCanvas(canvasElement, colour) {
		var drawingContext = canvasElement.getContext('2d')
		drawingContext.fillStyle = colour
		drawingContext.fillRect(10, 10, canvasElement.width - 20, canvasElement.height - 20)
	}
	var canvasElement = document.getElementById('myCanvas')
	renderCanvas(canvasElement, '#ff0000')

	var linkElement = document.getElementById('downloadLink')
	linkElement.addEventListener('click', function() {
		var newCanvas = document.createElement('canvas')
		newCanvas.width = 320
		newCanvas.height = 240

		renderCanvas(newCanvas, '#00ff00')

		let fakeDownloadElement = document.createElement('a')
	    document.body.appendChild(fakeDownloadElement)
	    fakeDownloadElement.setAttribute('href', newCanvas.toDataURL('image/png', 1.0))
	    fakeDownloadElement.setAttribute('download', 'green-rectangle.png')
	    fakeDownloadElement.style.display = ''

	    fakeDownloadElement.click()

	    document.body.removeChild(element)
	})
&lt;/script&gt;
</code></pre>
<p>What we've done here is change the render function slightly, so that it takes a colour parameter to the render function, and we've changed the box drawing logic, so that it draws a rectangle inside the edges of the canvas, regardless of the canvas size.</p>
<p>A user will now see a preview of a red box, but if they click on the download link, they'll get a green rectangle downloaded instead. They could still click on the original canvas and save that of course, but that's not the point of this exercise, and there are other ways of preventing that behaviour.</p>
<p><img src="../content/images/2017/04/canvaspreview.gif" alt="Canvas download image preview"></p>
<p>We've achieved all of this on the client-side - no server-based image generation at all. This is the logic which underpins the wallpaper downloads of PokéProject <a href="https://www.pokeproject.co.uk/">[link]</a>, which has a number of pre-set image download links at fixed and custom resolutions.</p>
<p><a href="https://codepen.io/psyked/pen/WjpaMQ">You can see a working example on CodePen.</a></p>
</div>
            </section>


            <footer class="post-full-footer">

                <section class="author-card">
                        <img class="author-profile-image" src="http://www.gravatar.com/avatar/50bd52fe63e2264aeae49b33d0e9102e?s=250&amp;d=mm&amp;r=x" alt="James Ford">
                    <section class="author-card-content">
                        <h4 class="author-card-name"><a href="../author/james/">James Ford</a></h4>
                            <p>Read <a href="../author/james/">more posts</a> by this author.</p>
                    </section>
                </section>
                <div class="post-full-footer-right">
                    <a class="author-card-button" href="../author/james/">Read More</a>
                </div>

            </footer>


        </article>

    </div>
</main>

<aside class="read-next outer">
    <div class="inner">
        <div class="read-next-feed">

                <article class="read-next-card" style="background-image: url(../content/images/2017/04/imageedit_2_3667145930--1-.jpg)">
                    <header class="read-next-card-header">
                        <small class="read-next-card-header-sitetitle">— Psyked —</small>
                        <h3 class="read-next-card-header-title"><a href="../tag/canvas/">canvas</a></h3>
                    </header>
                    <div class="read-next-divider"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M13 14.5s2 3 5 3 5.5-2.463 5.5-5.5S21 6.5 18 6.5c-5 0-7 11-12 11C2.962 17.5.5 15.037.5 12S3 6.5 6 6.5s4.5 3.5 4.5 3.5"></path></svg>
</div>
                    <div class="read-next-card-content">
                        <ul>
                            <li><a href="../link-experiments-with-canvas-and-the-hype-framework/">Link: Experiments with Canvas and the HYPE Framework</a></li>
                        </ul>
                    </div>
                    <footer class="read-next-card-footer">
                        <a href="../tag/canvas/">1 post →</a>
                    </footer>
                </article>

                <article class="post-card post tag-nodejs tag-trello">
        <a class="post-card-image-link" href="../uploading-files-to-trello-with-node-js/">
            <div class="post-card-image" style="background-image: url(../content/images/2017/05/Optimized-sanwal-deen-93466.jpg)"></div>
        </a>
    <div class="post-card-content">
        <a class="post-card-content-link" href="../uploading-files-to-trello-with-node-js/">
            <header class="post-card-header">
                    <span class="post-card-tags">nodejs</span>
                <h2 class="post-card-title">Uploading files to Trello with Node.js</h2>
            </header>
            <section class="post-card-excerpt">
                <p>Trello is one of my favourite low-budget Content Management Systems for bootstrapped projects (that is to say, projects with zero budget and not projects which use the bootstrap css framework.) One of the</p>
            </section>
        </a>
        <footer class="post-card-meta">
                <img class="author-profile-image" src="http://www.gravatar.com/avatar/50bd52fe63e2264aeae49b33d0e9102e?s=250&amp;d=mm&amp;r=x" alt="James Ford">
            <span class="post-card-author"><a href="../author/james/">James Ford</a></span>
        </footer>
    </div>
</article>

                <article class="post-card post tag-agile">
        <a class="post-card-image-link" href="../how-to-effectively-kill-your-agile-team/">
            <div class="post-card-image" style="background-image: url(../content/images/2017/04/giphy.gif)"></div>
        </a>
    <div class="post-card-content">
        <a class="post-card-content-link" href="../how-to-effectively-kill-your-agile-team/">
            <header class="post-card-header">
                    <span class="post-card-tags">agile</span>
                <h2 class="post-card-title">How to effectively kill your Agile Team</h2>
            </header>
            <section class="post-card-excerpt">
                <p>Agile methodology is the glorious present and future of software development, but the correct set of circumstances can seriously cripple a team's morale and their effectiveness. Introduce a hierarchy Such an innocuous thing,</p>
            </section>
        </a>
        <footer class="post-card-meta">
                <img class="author-profile-image" src="http://www.gravatar.com/avatar/50bd52fe63e2264aeae49b33d0e9102e?s=250&amp;d=mm&amp;r=x" alt="James Ford">
            <span class="post-card-author"><a href="../author/james/">James Ford</a></span>
        </footer>
    </div>
</article>

        </div>
    </div>
</aside>

<div class="floating-header">
    <div class="floating-header-logo">
        <a href="../">
            <span>Psyked</span>
        </a>
    </div>
    <span class="floating-header-divider">—</span>
    <div class="floating-header-title">Generating images for download with HTML5 and Canvas</div>
    <div class="floating-header-share">
        <div class="floating-header-share-label">Share this <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24">
    <path d="M7.5 15.5V4a1.5 1.5 0 1 1 3 0v4.5h2a1 1 0 0 1 1 1h2a1 1 0 0 1 1 1H18a1.5 1.5 0 0 1 1.5 1.5v3.099c0 .929-.13 1.854-.385 2.748L17.5 23.5h-9c-1.5-2-5.417-8.673-5.417-8.673a1.2 1.2 0 0 1 1.76-1.605L7.5 15.5zm6-6v2m-3-3.5v3.5m6-1v2"></path>
</svg>
</div>
        <a class="floating-header-share-tw" href="https://twitter.com/share?text=Generating%20images%20for%20download%20with%20HTML5%20and%20Canvas&amp;url=http://localhost:2368/generating-images-for-download-with-html5-and-canvas/" onclick="window.open(this.href, 'share-twitter', 'width=550,height=235');return false;">
            <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 32 32"><path d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088 0 0 1-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015 0 0 1-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25 0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688 0 5.063-.875 7.188-2.5-1.25 0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5 0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673 0 0 1-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228 0 0 1-1.875-2c-.5-.875-.688-1.813-.688-2.75 0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579 0 0 1 1.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48 0 0 0 3.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"></path></svg>
        </a>
        <a class="floating-header-share-fb" href="https://www.facebook.com/sharer/sharer.php?u=http://localhost:2368/generating-images-for-download-with-html5-and-canvas/" onclick="window.open(this.href, 'share-facebook','width=580,height=296');return false;">
            <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 32 32"><path d="M19 6h5V0h-5c-3.86 0-7 3.14-7 7v3H8v6h4v16h6V16h5l1-6h-6V7c0-.542.458-1 1-1z"></path></svg>
        </a>
    </div>
    <progress class="progress" value="0">
        <div class="progress-container">
            <span class="progress-bar"></span>
        </div>
    </progress>
</div>




        <footer class="site-footer outer">
            <div class="site-footer-content inner">
                <section class="copyright"><a href="../">Psyked</a> © 2017</section>
                <nav class="site-footer-nav">
                    <a href="../">Latest Posts</a>
                    <a href="https://www.facebook.com/psykedcouk" target="_blank">Facebook</a>
                    <a href="https://twitter.com/psyked" target="_blank">Twitter</a>
                    <a href="https://ghost.org" target="_blank">Ghost</a>
                </nav>
            </div>
        </footer>

    </div>


    <script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous">
    </script>
    <script type="text/javascript" src="../assets/js/jquery.fitvids.js?v=13d67b6af7"></script>


    <script>

// NOTE: Scroll performance is poor in Safari
// - this appears to be due to the events firing much more slowly in Safari.
//   Dropping the scroll event and using only a raf loop results in smoother
//   scrolling but continuous processing even when not scrolling
$(document).ready(function () {
    // Start fitVids
    var $postContent = $(".post-full-content");
    $postContent.fitVids();
    // End fitVids

    var progressBar = document.querySelector('progress');
    var header = document.querySelector('.floating-header');
    var title = document.querySelector('.post-full-title');

    var lastScrollY = window.scrollY;
    var lastWindowHeight = window.innerHeight;
    var lastDocumentHeight = $(document).height();
    var ticking = false;

    function onScroll() {
        lastScrollY = window.scrollY;
        requestTick();
    }

    function onResize() {
        lastWindowHeight = window.innerHeight;
        lastDocumentHeight = $(document).height();
        requestTick();
    }

    function requestTick() {
        if (!ticking) {
            requestAnimationFrame(update);
        }
        ticking = true;
    }

    function update() {
        var trigger = title.getBoundingClientRect().top + window.scrollY;
        var triggerOffset = title.offsetHeight + 35;
        var progressMax = lastDocumentHeight - lastWindowHeight;

        // show/hide floating header
        if (lastScrollY >= trigger + triggerOffset) {
            header.classList.add('floating-active');
        } else {
            header.classList.remove('floating-active');
        }

        progressBar.setAttribute('max', progressMax);
        progressBar.setAttribute('value', lastScrollY);

        ticking = false;
    }

    window.addEventListener('scroll', onScroll, {passive: true});
    window.addEventListener('resize', onResize, false);

    update();
});
</script>


    <!-- You can safely delete this line if your theme does not require jQuery -->
<script type="text/javascript" src="https://code.jquery.com/jquery-1.11.3.min.js"></script>

<script async src="http://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Blog Ads -->
<ins class="adsbygoogle" style="display:block;background:#333" data-ad-client="ca-pub-9822532238875422" data-ad-slot="2939606192" data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<style>.adsbygoogle iframe{margin:0}</style>

</body>
